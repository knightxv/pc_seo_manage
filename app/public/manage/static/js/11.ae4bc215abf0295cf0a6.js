webpackJsonp([11],{511:function(e,t,r){r(649);var a=r(198)(r(580),r(629),null,null);e.exports=a.exports},525:function(e,t,r){var a=r(136),o=r(49)("toStringTag"),n="Arguments"==a(function(){return arguments}()),i=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=i(t=Object(e),o))?r:n?a(t):"Object"==(l=a(t))&&"function"==typeof t.callee?"Arguments":l}},530:function(e,t,r){var a=r(89),o=r(49)("iterator"),n=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||n[o]===e)}},531:function(e,t,r){var a=r(64);e.exports=function(e,t,r,o){try{return o?t(a(r)[0],r[1]):t(r)}catch(t){var n=e.return;throw void 0!==n&&a(n.call(e)),t}}},532:function(e,t,r){var a=r(49)("iterator"),o=!1;try{var n=[7][a]();n.return=function(){o=!0},Array.from(n,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var n=[7],i=n[a]();i.next=function(){return{done:r=!0}},n[a]=function(){return i},e(n)}catch(e){}return r}},533:function(e,t,r){var a=r(525),o=r(49)("iterator"),n=r(89);e.exports=r(63).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||n[a(e)]}},565:function(e,t,r){e.exports={default:r(568),__esModule:!0}},566:function(e,t,r){e.exports={default:r(569),__esModule:!0}},567:function(e,t,r){"use strict";t.__esModule=!0;var a=r(565),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,o.default)(e)}},568:function(e,t,r){r(201),r(571),e.exports=r(63).Array.from},569:function(e,t,r){var a=r(63),o=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},570:function(e,t,r){"use strict";var a=r(50),o=r(67);e.exports=function(e,t,r){t in e?a.f(e,t,o(0,r)):e[t]=r}},571:function(e,t,r){"use strict";var a=r(197),o=r(88),n=r(139),i=r(531),l=r(530),s=r(200),c=r(570),u=r(533);o(o.S+o.F*!r(532)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,o,m,f=n(e),p="function"==typeof this?this:Array,d=arguments.length,g=d>1?arguments[1]:void 0,h=void 0!==g,v=0,b=u(f);if(h&&(g=a(g,d>2?arguments[2]:void 0,2)),void 0==b||p==Array&&l(b))for(t=s(f.length),r=new p(t);t>v;v++)c(r,v,h?g(f[v],v):f[v]);else for(m=b.call(f),r=new p;!(o=m.next()).done;v++)c(r,v,h?i(m,g,[o.value,v],!0):o.value);return r.length=v,r}})},572:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}},580:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(567),o=r.n(a),n=r(566),i=r.n(n),l=r(138),s=r.n(l),c=r(572),u=r.n(c),m=[{label:"大众棋牌",value:"dzqp",type:1},{label:"特色棋牌",value:"tsqp",type:2},{label:"地方麻将",value:"dfmj",type:3}];t.default={data:function(){return{remoteUrl:this.config.remoteUrl,form:{gameName:"",gameBrief:"",gameSize:"",gameVersion:"",gameType:m[0].type,publicDate:new Date,downUrl:"",gameLoginUrl:"",gameIntroduce:"",characteristic:""},showInPhone:!1,imageUrl:"",gameScreenshot:[],dialogImageUrl:"",dialogVisible:!1,gameTypeArr:m}},created:function(){var e=this,t=this.$route.query.gameId;this.webHttp.get("/api/gameDetail/"+t).then(function(t){if(t.success){var r=t.data,a=r.gameIcon,o=r.publicDate,n=r.gameIntroduce,i=r.characteristic,l=r.gameScreenshot,c=r.gameType,m=r.showInPhone,f=u()(r,["gameIcon","publicDate","gameIntroduce","characteristic","gameScreenshot","gameType","showInPhone"]);e.form=s()({},e.form,f,{publicDate:new Date(o),gameIntroduce:n.replace("<br />","\r\n"),characteristic:i.replace("<br />","\r\n"),gameType:+c}),e.imageUrl=a;var p=JSON.parse(l);e.gameScreenshot=p.map(function(e){return{name:e,url:e}}),e.showInPhone=!!m}else e.$message.error(t.info||"网络繁忙")})},methods:{onSubmit:function(){var e=this,t=this.$route.query.gameId,r=this.imageUrl,a=this.form,o=a.gameName,n=a.gameBrief,l=a.gameSize,s=a.gameVersion,c=a.gameType,u=a.publicDate,m=a.downUrl,f=a.gameLoginUrl,p=a.gameIntroduce,d=a.characteristic,g=this.gameScreenshot.map(function(e){return e.url}),h=i()(g);if(o.length>20)return void this.$message.error("名字不能超过20个字");var v={id:t,gameName:o,gameBrief:n,gameSize:l,gameVersion:s,publicDate:u.getTime(),downUrl:m,gameLoginUrl:f,gameIntroduce:p.replace(/\r{0,}\n/g,"<br />"),gameType:c,characteristic:d.replace(/\r{0,}\n/g,"<br />"),gameScreenshot:h,gameIcon:r,showInPhone:this.showInPhone};this.webHttp.get("/api/manage/updateGame",v).then(function(t){t.success?(e.$message.success("修改成功"),e.$router.back()):e.$message.error("添加失败")})},onCancel:function(){this.$router.back()},uploadImage:function(e){var t=e.file,r=new FormData;r.append("files",t),this.webHttp.form("/api/upload/image/games",r).then(function(t){t.success&&e.onSuccess(t.data,e)})},handleAvatarSuccess:function(e,t){this.imageUrl=e.url},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},handleRemove:function(e,t){this.gameScreenshot=t},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handlePictureCardSuccess:function(e,t){this.gameScreenshot=[].concat(o()(this.gameScreenshot),[{name:t.name,url:e.url}])}}}},607:function(e,t,r){t=e.exports=r(87)(void 0),t.push([e.i,".avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload:hover{border-color:#409eff}.avatar-uploader-icon{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center}.avatar{width:178px;height:178px;display:block}",""])},629:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-date"}),e._v(" 游戏管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("修改游戏")])],1)],1),e._v(" "),r("div",{staticClass:"form-box"},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"游戏名称"}},[r("el-input",{model:{value:e.form.gameName,callback:function(t){e.$set(e.form,"gameName",t)},expression:"form.gameName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"游戏简介"}},[r("el-input",{model:{value:e.form.gameBrief,callback:function(t){e.$set(e.form,"gameBrief",t)},expression:"form.gameBrief"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"游戏大小"}},[r("el-input",{model:{value:e.form.gameSize,callback:function(t){e.$set(e.form,"gameSize",t)},expression:"form.gameSize"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"游戏版本"}},[r("el-input",{model:{value:e.form.gameVersion,callback:function(t){e.$set(e.form,"gameVersion",t)},expression:"form.gameVersion"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"游戏下载地址"}},[r("el-input",{model:{value:e.form.downUrl,callback:function(t){e.$set(e.form,"downUrl",t)},expression:"form.downUrl"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"代理登陆地址"}},[r("el-input",{model:{value:e.form.gameLoginUrl,callback:function(t){e.$set(e.form,"gameLoginUrl",t)},expression:"form.gameLoginUrl"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"更新日期"}},[r("el-col",{attrs:{span:11}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.publicDate,callback:function(t){e.$set(e.form,"publicDate",t)},expression:"form.publicDate"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"游戏类型"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.gameType,callback:function(t){e.$set(e.form,"gameType",t)},expression:"form.gameType"}},e._l(e.gameTypeArr,function(e){return r("el-option",{key:e.type,attrs:{label:e.label,value:e.type}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"游戏图标"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":e.uploadImage,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?r("img",{staticClass:"avatar",attrs:{src:e.remoteUrl+e.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),r("el-form-item",{attrs:{label:"游戏截图(1360*760)"}},[r("el-upload",{attrs:{action:"","list-type":"picture-card","show-file-list":!0,"http-request":e.uploadImage,"on-preview":e.handlePictureCardPreview,"on-success":e.handlePictureCardSuccess,"file-list":e.gameScreenshot,"on-remove":e.handleRemove}},[r("i",{staticClass:"el-icon-plus"})]),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.remoteUrl+e.dialogImageUrl,alt:""}})])],1),e._v(" "),r("el-form-item",{attrs:{label:"玩法介绍"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.gameIntroduce,callback:function(t){e.$set(e.form,"gameIntroduce",t)},expression:"form.gameIntroduce"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"游戏亮点"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.characteristic,callback:function(t){e.$set(e.form,"characteristic",t)},expression:"form.characteristic"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"显示在手机"}},[r("el-switch",{attrs:{"on-text":"yes","off-text":"no"},model:{value:e.showInPhone,callback:function(t){e.showInPhone=t},expression:"showInPhone"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("修改")]),e._v(" "),r("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[]}},649:function(e,t,r){var a=r(607);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(196)("682b03f5",a,!0)}});